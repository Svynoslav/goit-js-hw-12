{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\n\nimport axios from 'axios';\n\nasync function fetchData(url, params) {\n    const { data } = await axios(url, { params });\n    return data;\n}\n\nexport { fetchData };\n\n\n","'use strict';\n\nfunction createMarkup(data) {\n    return data.hits.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n        <li class=\"search-item\">\n            <a class=\"search-link\" href=\"${largeImageURL}\">\n                <img src=\"${webformatURL}\" alt=\"${tags}\">\n            </a>\n            <div class=\"search-item-text-wrap\">\n                <div class=\"search-item-text\">\n                    <h2>Likes</h2>\n                    <p>${likes}</p>\n                </div>\n                <div class=\"search-item-text\">\n                    <h2>Views</h2>\n                    <p>${views}</p>\n                </div>\n                <div class=\"search-item-text\">\n                    <h2>Comments</h2>\n                    <p>${comments}</p>\n                </div>\n                <div class=\"search-item-text\">\n                    <h2>Downloads</h2>\n                    <p>${downloads}</p>\n                </div>\n            </div>\n        </li>\n    `).join('');\n}\n\nexport { createMarkup };","'use strict';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { fetchData } from \"./js/pixabay-api\";\nimport { createMarkup } from \"./js/render-functions\";\n\nconst API_KEY = '44071126-68094a25e5e927b0ae90eca12';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nconst searchForm = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadMoreBtn = document.querySelector('.load-btn');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250\n});\n\nsearchForm.addEventListener('submit', submitHandler);\nloadMoreBtn.addEventListener('click', loadMoreHandler);\n\nlet page = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nfunction submitHandler(event) {\n    event.preventDefault();\n    currentQuery = event.target.query.value.trim();\n    if (currentQuery === '') {\n        return;\n    }\n    gallery.innerHTML = '';\n    page = 1;\n    totalHits = 0;\n    loadMoreBtn.style.display = 'none';\n    loader.style.display = 'block';\n\n    fetchImages();\n}\n\nfunction loadMoreHandler() {\n    page += 1;\n    loader.style.display = 'block';\n    loadMoreBtn.disabled = true;\n    fetchImages();\n}\n\nfunction fetchImages() {\n    const options = new URLSearchParams({\n        key: API_KEY,\n        q: currentQuery,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page,\n        per_page: 15,\n    });\n\n    fetchData(BASE_URL, options)\n        .then(resp => {\n            if (resp.hits.length === 0 && page === 1) {\n                iziToast.error({\n                    message: 'Sorry, there are no images matching your search query. Please try again!',\n                    position: 'topRight',\n                    backgroundColor: 'red',\n                    messageColor: 'white',\n                });\n                loader.style.display = 'none';\n                return;\n            }\n            if (page === 1) {\n                totalHits = resp.totalHits;\n            }\n\n            gallery.insertAdjacentHTML(\"beforeend\", createMarkup(resp));\n            lightbox.refresh();\n            loader.style.display = 'none';\n            loadMoreBtn.disabled = false;\n\n            if (gallery.children.length >= totalHits) {\n                loadMoreBtn.style.display = 'none';\n                iziToast.info({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: 'topRight',\n                    backgroundColor: 'blue',\n                    messageColor: 'white',\n                });\n            } else {\n                loadMoreBtn.style.display = 'block';\n            }\n\n            smoothScroll();\n        })\n        .catch(err => {\n            console.log(err);\n            loader.style.display = 'none';\n            loadMoreBtn.disabled = false;\n        });\n}\n\nfunction smoothScroll() {\n    const { height: cardHeight } = gallery.firstElementChild.getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n"],"names":["fetchData","url","params","data","axios","createMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","API_KEY","BASE_URL","searchForm","gallery","loader","loadMoreBtn","lightbox","SimpleLightbox","submitHandler","loadMoreHandler","page","currentQuery","totalHits","event","fetchImages","options","resp","iziToast","smoothScroll","err","cardHeight"],"mappings":"owBAIA,eAAeA,EAAUC,EAAKC,EAAQ,CAClC,KAAM,CAAE,KAAAC,CAAI,EAAK,MAAMC,EAAMH,EAAK,CAAE,OAAAC,CAAM,CAAE,EAC5C,OAAOC,CACX,CCLA,SAASE,EAAaF,EAAM,CACxB,OAAOA,EAAK,KAAK,IAAI,CAAC,CAAE,aAAAG,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAW,IAAK;AAAA;AAAA,2CAE5DL,CAAa;AAAA,4BAC5BD,CAAY,UAAUE,CAAI;AAAA;AAAA;AAAA;AAAA;AAAA,yBAK7BC,CAAK;AAAA;AAAA;AAAA;AAAA,yBAILC,CAAK;AAAA;AAAA;AAAA;AAAA,yBAILC,CAAQ;AAAA;AAAA;AAAA;AAAA,yBAIRC,CAAS;AAAA;AAAA;AAAA;AAAA,KAI7B,EAAE,KAAK,EAAE,CACd,CClBA,MAAMC,EAAU,qCACVC,EAAW,2BAEXC,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,WAAW,EAEhDC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAC,EAEDL,EAAW,iBAAiB,SAAUM,CAAa,EACnDH,EAAY,iBAAiB,QAASI,CAAe,EAErD,IAAIC,EAAO,EACPC,EAAe,GACfC,EAAY,EAEhB,SAASJ,EAAcK,EAAO,CAC1BA,EAAM,eAAc,EACpBF,EAAeE,EAAM,OAAO,MAAM,MAAM,KAAI,EACxCF,IAAiB,KAGrBR,EAAQ,UAAY,GACpBO,EAAO,EACPE,EAAY,EACZP,EAAY,MAAM,QAAU,OAC5BD,EAAO,MAAM,QAAU,QAEvBU,IACJ,CAEA,SAASL,GAAkB,CACvBC,GAAQ,EACRN,EAAO,MAAM,QAAU,QACvBC,EAAY,SAAW,GACvBS,GACJ,CAEA,SAASA,GAAc,CACnB,MAAMC,EAAU,IAAI,gBAAgB,CAChC,IAAKf,EACL,EAAGW,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAAD,EACA,SAAU,EAClB,CAAK,EAEDvB,EAAUc,EAAUc,CAAO,EACtB,KAAKC,GAAQ,CACV,GAAIA,EAAK,KAAK,SAAW,GAAKN,IAAS,EAAG,CACtCO,EAAS,MAAM,CACX,QAAS,2EACT,SAAU,WACV,gBAAiB,MACjB,aAAc,OAClC,CAAiB,EACDb,EAAO,MAAM,QAAU,OACvB,MACH,CACGM,IAAS,IACTE,EAAYI,EAAK,WAGrBb,EAAQ,mBAAmB,YAAaX,EAAawB,CAAI,CAAC,EAC1DV,EAAS,QAAO,EAChBF,EAAO,MAAM,QAAU,OACvBC,EAAY,SAAW,GAEnBF,EAAQ,SAAS,QAAUS,GAC3BP,EAAY,MAAM,QAAU,OAC5BY,EAAS,KAAK,CACV,QAAS,6DACT,SAAU,WACV,gBAAiB,OACjB,aAAc,OAClC,CAAiB,GAEDZ,EAAY,MAAM,QAAU,QAGhCa,GACZ,CAAS,EACA,MAAMC,GAAO,CACV,QAAQ,IAAIA,CAAG,EACff,EAAO,MAAM,QAAU,OACvBC,EAAY,SAAW,EACnC,CAAS,CACT,CAEA,SAASa,GAAe,CACpB,KAAM,CAAE,OAAQE,CAAU,EAAKjB,EAAQ,kBAAkB,wBACzD,OAAO,SAAS,CACZ,IAAKiB,EAAa,EAClB,SAAU,QAClB,CAAK,CACL"}